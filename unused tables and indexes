SELECT 
  nspname AS schemaname,
  relname AS object_name,
  CASE 
    WHEN obj_description(c.oid, 'pg_class') IS NOT NULL THEN obj_description(c.oid, 'pg_class') 
    ELSE 'No description available' 
  END AS object_description,
  CASE 
    WHEN relkind = 'r' THEN 'table' 
    WHEN relkind = 'i' THEN 'index' 
    ELSE 'other' 
  END AS object_type
FROM 
  pg_class c
JOIN 
  pg_namespace ns ON c.relnamespace = ns.oid
WHERE 
  relkind IN ('r', 'i') -- Only tables and indexes
  AND NOT EXISTS (
    SELECT 1 
    FROM pg_stat_activity 
    WHERE 
      (pg_stat_activity.query ~* (c.relname || '_idx') OR pg_stat_activity.query ~* c.relname)
      AND pg_stat_activity.state = 'idle'
      AND pg_stat_activity.state_change < current_timestamp - interval '1 week' -- You can adjust the time threshold as needed
  )
ORDER BY 
  nspname,
  relname;
